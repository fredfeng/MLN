<head>
<LINK rel="stylesheet" type="text/css" name="style1"href="../styles.css">
</head>
<script language=javascript>
<!-- Hide from non-javascript browsers
browserName=navigator.appName;
if (browserName.indexOf('Netscape')>=0)
{
parent.filenameFrame.document.layers[0].document.clear();
parent.filenameFrame.document.layers[0].document.open();
parent.filenameFrame.document.layers[0].document.write(
'<A HREF="classList.html" TARGET="packageFrame">antlr</A>: Tool');
parent.filenameFrame.document.layers[0].document.close();
}
if (browserName.indexOf('Microsoft')>=0)
{
parent.frames.filenameFrame.textDiv.innerHTML='<A HREF="classList.html" TARGET="packageFrame">antlr</A>: Tool';}
//-->
</script><pre>
<a name=1 class="linenum">1	</SPAN>package antlr;
<a name=2 class="linenum">2	</SPAN>
<a name=3 class="linenum">3	</SPAN><span class="comment">/**
<a name=4 class="linenum">4	</SPAN> * &lt;b>SOFTWARE RIGHTS&lt;/b>
<a name=5 class="linenum">5	</SPAN> * &lt;p>
<a name=6 class="linenum">6	</SPAN> * ANTLR 2.5.0 MageLang Institute, 1998
<a name=7 class="linenum">7	</SPAN> * &lt;p>
<a name=8 class="linenum">8	</SPAN> * We reserve no legal rights to the ANTLR--it is fully in the
<a name=9 class="linenum">9	</SPAN> * public domain. An individual or company may do whatever
<a name=10 class="linenum">10	</SPAN> * they wish with source code distributed with ANTLR or the
<a name=11 class="linenum">11	</SPAN> * code generated by ANTLR, including the incorporation of
<a name=12 class="linenum">12	</SPAN> * ANTLR, or its output, into commerical software.
<a name=13 class="linenum">13	</SPAN> * &lt;p>
<a name=14 class="linenum">14	</SPAN> * We encourage users to develop software with ANTLR. However,
<a name=15 class="linenum">15	</SPAN> * we do ask that credit is given to us for developing
<a name=16 class="linenum">16	</SPAN> * ANTLR. By "credit", we mean that if you use ANTLR or
<a name=17 class="linenum">17	</SPAN> * incorporate any source code into one of your programs
<a name=18 class="linenum">18	</SPAN> * (commercial product, research project, or otherwise) that
<a name=19 class="linenum">19	</SPAN> * you acknowledge this fact somewhere in the documentation,
<a name=20 class="linenum">20	</SPAN> * research report, etc... If you like ANTLR and have
<a name=21 class="linenum">21	</SPAN> * developed a nice tool with the output, please mention that
<a name=22 class="linenum">22	</SPAN> * you developed it using ANTLR. In addition, we ask that the
<a name=23 class="linenum">23	</SPAN> * headers remain intact in our source code. As long as these
<a name=24 class="linenum">24	</SPAN> * guidelines are kept, we expect to continue enhancing this
<a name=25 class="linenum">25	</SPAN> * system and expect to make other tools available as they are
<a name=26 class="linenum">26	</SPAN> * completed.
<a name=27 class="linenum">27	</SPAN> * &lt;p>
<a name=28 class="linenum">28	</SPAN> * The ANTLR gang:
<a name=29 class="linenum">29	</SPAN> * @version ANTLR 2.5.0 MageLang Institute, 1998
<a name=30 class="linenum">30	</SPAN> * @author Terence Parr, &lt;a href=http://www.MageLang.com>MageLang Institute&lt;/a>
<a name=31 class="linenum">31	</SPAN> * @author &lt;br>John Lilley, &lt;a href=http://www.Empathy.com>Empathy Software&lt;/a>
<a name=32 class="linenum">32	</SPAN> */</span>
<a name=33 class="linenum">33	</SPAN>
<a name=34 class="linenum">34	</SPAN>import java.io.*;
<a name=35 class="linenum">35	</SPAN>import antlr.collections.impl.BitSet;
<a name=36 class="linenum">36	</SPAN>import antlr.collections.impl.Vector;
<a name=37 class="linenum">37	</SPAN>public class <a class="classDef" name=Tool href=Tool_java_ref.html#Tool>Tool</a> {
<a name=38 class="linenum">38	</SPAN>	<span class="comment">// Object that handles analysis errors
<a name=39 class="linenum">39	</SPAN></span>	<a class="classRef" href=ToolErrorHandler_java.html#ToolErrorHandler>ToolErrorHandler</a> <a class="varDef" name=errorHandler href=Tool_java_ref.html#errorHandler>errorHandler</a>;
<a name=40 class="linenum">40	</SPAN>
<a name=41 class="linenum">41	</SPAN>	<span class="comment">// Was there an error during parsing or analysis?
<a name=42 class="linenum">42	</SPAN></span>	protected boolean <a class="varDef" name=hasError href=Tool_java_ref.html#hasError>hasError</a> = false;
<a name=43 class="linenum">43	</SPAN>
<a name=44 class="linenum">44	</SPAN>	<span class="comment">// Generate diagnostics? (vs code)
<a name=45 class="linenum">45	</SPAN></span>	boolean <a class="varDef" name=genDiagnostics href=Tool_java_ref.html#genDiagnostics>genDiagnostics</a> = false;
<a name=46 class="linenum">46	</SPAN>
<a name=47 class="linenum">47	</SPAN>	<span class="comment">/** Generate HTML vs code? */</span>
<a name=48 class="linenum">48	</SPAN>	boolean <a class="varDef" name=genHTML href=Tool_java_ref.html#genHTML>genHTML</a> = false;
<a name=49 class="linenum">49	</SPAN>	
<a name=50 class="linenum">50	</SPAN>	<span class="comment">/** Current output directory for generated files */</span>
<a name=51 class="linenum">51	</SPAN>	protected static String <a class="varDef" name=outputDir href=Tool_java_ref.html#outputDir>outputDir</a> = ".";
<a name=52 class="linenum">52	</SPAN>
<a name=53 class="linenum">53	</SPAN>	<span class="comment">// Grammar input
<a name=54 class="linenum">54	</SPAN></span>	String <a class="varDef" name=grammarFile href=Tool_java_ref.html#grammarFile>grammarFile</a>;
<a name=55 class="linenum">55	</SPAN>	transient Reader <a class="varDef" name=f href=Tool_java_ref.html#f>f</a> = new InputStreamReader(System.in);
<a name=56 class="linenum">56	</SPAN>	<span class="comment">// SAS: changed for proper text io
<a name=57 class="linenum">57	</SPAN></span>	<span class="comment">//	transient DataInputStream in = null;
<a name=58 class="linenum">58	</SPAN></span>
<a name=59 class="linenum">59	</SPAN>	protected static String <a class="varDef" name=literalsPrefix href=Tool_java_ref.html#literalsPrefix>literalsPrefix</a> = "LITERAL_";
<a name=60 class="linenum">60	</SPAN>	protected static boolean <a class="varDef" name=upperCaseMangledLiterals href=Tool_java_ref.html#upperCaseMangledLiterals>upperCaseMangledLiterals</a> = false;
<a name=61 class="linenum">61	</SPAN>
<a name=62 class="linenum">62	</SPAN>	private static <a class="classRef" href=../antlr/collections/impl/BitSet_java.html#BitSet>BitSet</a> <a class="varDef" name=cmdLineArgValid href=Tool_java_ref.html#cmdLineArgValid>cmdLineArgValid</a> = new <a class="methodRef" href=../antlr/collections/impl/BitSet_java.html#BitSet()>BitSet</a>();
<a name=63 class="linenum">63	</SPAN>
<a name=64 class="linenum">64	</SPAN>
<a name=65 class="linenum">65	</SPAN>	<span class="comment">/** Construct a new Tool. */</span>
<a name=66 class="linenum">66	</SPAN>	public <a class="methodDef" name=Tool() href=Tool_java_ref.html#Tool()>Tool</a>() {
<a name=67 class="linenum">67	</SPAN>		<span class="comment">// SAS: removed private so could create subclass
<a name=68 class="linenum">68	</SPAN></span>		<a class="varRef" href=Tool_java.html#errorHandler>errorHandler</a> = new <a class="methodRef" href=DefaultToolErrorHandler_java.html#DefaultToolErrorHandler()>DefaultToolErrorHandler</a>();
<a name=69 class="linenum">69	</SPAN>	}
<a name=70 class="linenum">70	</SPAN>private static void <a class="methodDef" name=checkForInvalidArguments(String,BitSet) href=Tool_java_ref.html#checkForInvalidArguments(String,BitSet)>checkForInvalidArguments</a>(String[] args, <a class="classRef" href=../antlr/collections/impl/BitSet_java.html#BitSet>BitSet</a> cmdLineArgValid) {
<a name=71 class="linenum">71	</SPAN>	<span class="comment">// check for invalid command line args
<a name=72 class="linenum">72	</SPAN></span>	for (int a = 0; a &lt; args.length; a++) {
<a name=73 class="linenum">73	</SPAN>		if (!cmdLineArgValid.<a class="methodRef" href=../antlr/collections/impl/BitSet_java.html#member(int)>member</a>(a)) {
<a name=74 class="linenum">74	</SPAN>			<a class="methodRef" href=Tool_java.html#warning(String)>warning</a>("invalid command-line argument: " + args[a] + "; ignored");
<a name=75 class="linenum">75	</SPAN>		}
<a name=76 class="linenum">76	</SPAN>	}
<a name=77 class="linenum">77	</SPAN>}
<a name=78 class="linenum">78	</SPAN><span class="comment">// This example is from the book _Java in a Nutshell_ by David Flanagan.
<a name=79 class="linenum">79	</SPAN></span><span class="comment">// Written by David Flanagan.  Copyright (c) 1996 O'Reilly & Associates.
<a name=80 class="linenum">80	</SPAN></span><span class="comment">// You may study, use, modify, and distribute this example for any purpose.
<a name=81 class="linenum">81	</SPAN></span><span class="comment">// This example is provided WITHOUT WARRANTY either expressed or implied.
<a name=82 class="linenum">82	</SPAN></span>
<a name=83 class="linenum">83	</SPAN>  public static void <a class="methodDef" name=copyFile(String,String) href=Tool_java_ref.html#copyFile(String,String)>copyFile</a>(String source_name, String dest_name) 
<a name=84 class="linenum">84	</SPAN>	   throws IOException
<a name=85 class="linenum">85	</SPAN>  {
<a name=86 class="linenum">86	</SPAN>	File source_file = new File(source_name);
<a name=87 class="linenum">87	</SPAN>	File destination_file = new File(dest_name);
<a name=88 class="linenum">88	</SPAN>	FileReader source = null; <span class="comment">// SAS: changed for proper text io
<a name=89 class="linenum">89	</SPAN></span>	FileWriter destination = null;
<a name=90 class="linenum">90	</SPAN>	char[] buffer;
<a name=91 class="linenum">91	</SPAN>	int bytes_read;
<a name=92 class="linenum">92	</SPAN>	
<a name=93 class="linenum">93	</SPAN>	try {
<a name=94 class="linenum">94	</SPAN>	  <span class="comment">// First make sure the specified source file 
<a name=95 class="linenum">95	</SPAN></span>	  <span class="comment">// exists, is a file, and is readable.
<a name=96 class="linenum">96	</SPAN></span>	  if (!source_file.exists() || !source_file.isFile())
<a name=97 class="linenum">97	</SPAN>	throw new <a class="methodRef" href=FileCopyException_java.html#FileCopyException(String)>FileCopyException</a>("FileCopy: no such source file: " +
<a name=98 class="linenum">98	</SPAN>				    source_name);
<a name=99 class="linenum">99	</SPAN>	  if (!source_file.canRead())
<a name=100 class="linenum">100	</SPAN>	throw new <a class="methodRef" href=FileCopyException_java.html#FileCopyException(String)>FileCopyException</a>("FileCopy: source file " + 
<a name=101 class="linenum">101	</SPAN>				    "is unreadable: " + source_name);
<a name=102 class="linenum">102	</SPAN>	  
<a name=103 class="linenum">103	</SPAN>	  <span class="comment">// If the destination exists, make sure it is a writeable file
<a name=104 class="linenum">104	</SPAN></span>	  <span class="comment">// and ask before overwriting it.  If the destination doesn't
<a name=105 class="linenum">105	</SPAN></span>	  <span class="comment">// exist, make sure the directory exists and is writeable.
<a name=106 class="linenum">106	</SPAN></span>	  if (destination_file.exists()) {
<a name=107 class="linenum">107	</SPAN>	if (destination_file.isFile()) {
<a name=108 class="linenum">108	</SPAN>	  DataInputStream in = new DataInputStream(System.in);
<a name=109 class="linenum">109	</SPAN>	  String response;
<a name=110 class="linenum">110	</SPAN>	  
<a name=111 class="linenum">111	</SPAN>	  if (!destination_file.canWrite())
<a name=112 class="linenum">112	</SPAN>	    throw new <a class="methodRef" href=FileCopyException_java.html#FileCopyException(String)>FileCopyException</a>("FileCopy: destination " +
<a name=113 class="linenum">113	</SPAN>										"file is unwriteable: " + dest_name);
<a name=114 class="linenum">114	</SPAN>	  <span class="comment">/*
<a name=115 class="linenum">115	</SPAN>	    System.out.print("File " + dest_name + 
<a name=116 class="linenum">116	</SPAN>							 " already exists.  Overwrite? (Y/N): ");
<a name=117 class="linenum">117	</SPAN>			     System.out.flush();
<a name=118 class="linenum">118	</SPAN>			     response = in.readLine();
<a name=119 class="linenum">119	</SPAN>			     if (!response.equals("Y") && !response.equals("y"))
<a name=120 class="linenum">120	</SPAN>			     throw new FileCopyException("FileCopy: copy cancelled.");
<a name=121 class="linenum">121	</SPAN>			     */</span>
<a name=122 class="linenum">122	</SPAN>	}
<a name=123 class="linenum">123	</SPAN>	else{
<a name=124 class="linenum">124	</SPAN>	  throw new <a class="methodRef" href=FileCopyException_java.html#FileCopyException(String)>FileCopyException</a>("FileCopy: destination "
<a name=125 class="linenum">125	</SPAN>				      + "is not a file: " +  dest_name);
<a name=126 class="linenum">126	</SPAN>	}
<a name=127 class="linenum">127	</SPAN>	  }
<a name=128 class="linenum">128	</SPAN>	  else {
<a name=129 class="linenum">129	</SPAN>	File parentdir = <a class="methodRef" href=Tool_java.html#parent(File)>parent</a>(destination_file);
<a name=130 class="linenum">130	</SPAN>	if (!parentdir.exists())
<a name=131 class="linenum">131	</SPAN>	  throw new <a class="methodRef" href=FileCopyException_java.html#FileCopyException(String)>FileCopyException</a>("FileCopy: destination "
<a name=132 class="linenum">132	</SPAN>				      + "directory doesn't exist: " + dest_name);
<a name=133 class="linenum">133	</SPAN>	if (!parentdir.canWrite())
<a name=134 class="linenum">134	</SPAN>	  throw new <a class="methodRef" href=FileCopyException_java.html#FileCopyException(String)>FileCopyException</a>("FileCopy: destination "
<a name=135 class="linenum">135	</SPAN>				      + "directory is unwriteable: " + dest_name);
<a name=136 class="linenum">136	</SPAN>	  }
<a name=137 class="linenum">137	</SPAN>	  
<a name=138 class="linenum">138	</SPAN>	  <span class="comment">// If we've gotten this far, then everything is okay; we can
<a name=139 class="linenum">139	</SPAN></span>	  <span class="comment">// copy the file.
<a name=140 class="linenum">140	</SPAN></span>	  source = new FileReader(source_file);
<a name=141 class="linenum">141	</SPAN>	  destination = new FileWriter(destination_file);
<a name=142 class="linenum">142	</SPAN>	  buffer = new char[1024];
<a name=143 class="linenum">143	</SPAN>	  while(true) {
<a name=144 class="linenum">144	</SPAN>	bytes_read = source.read(buffer,0,1024);
<a name=145 class="linenum">145	</SPAN>	if (bytes_read == -1) break;
<a name=146 class="linenum">146	</SPAN>	destination.write(buffer, 0, bytes_read);
<a name=147 class="linenum">147	</SPAN>	  }
<a name=148 class="linenum">148	</SPAN>	}
<a name=149 class="linenum">149	</SPAN>	<span class="comment">// No matter what happens, always close any streams we've opened.
<a name=150 class="linenum">150	</SPAN></span>	finally {
<a name=151 class="linenum">151	</SPAN>	  if (source != null) 
<a name=152 class="linenum">152	</SPAN>				try { source.close(); } catch (IOException e) { ; }
<a name=153 class="linenum">153	</SPAN>		if (destination != null) 
<a name=154 class="linenum">154	</SPAN>				try { destination.close(); } catch (IOException e) { ; }
<a name=155 class="linenum">155	</SPAN>	}
<a name=156 class="linenum">156	</SPAN>  }  
<a name=157 class="linenum">157	</SPAN>	<span class="comment">/** Perform processing on the grammar file.   Can only be called from main()
<a name=158 class="linenum">158	</SPAN>	 * @param args The command-line arguments passed to main()
<a name=159 class="linenum">159	</SPAN>	 */</span>
<a name=160 class="linenum">160	</SPAN>	void <a class="methodDef" name=doEverything(String) href=Tool_java_ref.html#doEverything(String)>doEverything</a>(String[] args) {
<a name=161 class="linenum">161	</SPAN>		<span class="comment">// SAS: removed "private" so subclass can call
<a name=162 class="linenum">162	</SPAN></span>		<span class="comment">//      (The subclass is for the VAJ interface)
<a name=163 class="linenum">163	</SPAN></span>		<span class="comment">// run the preprocessor to handle inheritance first.
<a name=164 class="linenum">164	</SPAN></span>		<a class="classRef" href=../antlr/preprocessor/Tool_java.html#Tool>Tool</a>r.preprocessor.Tool preTool = new antlr.preprocessor.Tool(this, args);
<a name=165 class="linenum">165	</SPAN>		if ( !preTool.<a class="methodRef" href=../antlr/preprocessor/Tool_java.html#preprocess()>preprocess</a>() ) {
<a name=166 class="linenum">166	</SPAN>			System.exit(1);
<a name=167 class="linenum">167	</SPAN>		}	
<a name=168 class="linenum">168	</SPAN>		String[] modifiedArgs = preTool.<a class="methodRef" href=../antlr/preprocessor/Tool_java.html#preprocessedArgList()>preprocessedArgList</a>();
<a name=169 class="linenum">169	</SPAN>
<a name=170 class="linenum">170	</SPAN>		<span class="comment">// process arguments for the Tool
<a name=171 class="linenum">171	</SPAN></span>		<a class="methodRef" href=Tool_java.html#processArguments(String)>processArguments</a>(modifiedArgs);
<a name=172 class="linenum">172	</SPAN>
<a name=173 class="linenum">173	</SPAN>		try {
<a name=174 class="linenum">174	</SPAN>			if (<a class="varRef" href=Tool_java.html#grammarFile>grammarFile</a> != null) {
<a name=175 class="linenum">175	</SPAN>				<a class="varRef" href=Tool_java.html#f>f</a> = new FileReader(<a class="varRef" href=Tool_java.html#grammarFile>grammarFile</a>);
<a name=176 class="linenum">176	</SPAN>			}
<a name=177 class="linenum">177	</SPAN>		}
<a name=178 class="linenum">178	</SPAN>		catch (IOException e) {
<a name=179 class="linenum">179	</SPAN>			System.err.println("Error: cannot open grammar file " + <a class="varRef" href=Tool_java.html#grammarFile>grammarFile</a>);
<a name=180 class="linenum">180	</SPAN>			<a class="methodRef" href=Tool_java.html#help()>help</a>();
<a name=181 class="linenum">181	</SPAN>			System.exit(1);
<a name=182 class="linenum">182	</SPAN>		}
<a name=183 class="linenum">183	</SPAN>
<a name=184 class="linenum">184	</SPAN>		<a class="classRef" href=TokenBuffer_java.html#TokenBuffer>TokenBuffer</a> tokenBuf = new <a class="methodRef" href=TokenBuffer_java.html#TokenBuffer(Tokenizer)>TokenBuffer</a>(new <a class="methodRef" href=ANTLRLexer_java.html#ANTLRLexer(InputStream)>ANTLRLexer</a>(<a class="varRef" href=Tool_java.html#f>f</a>));
<a name=185 class="linenum">185	</SPAN>		<a class="classRef" href=LLkAnalyzer_java.html#LLkAnalyzer>LLkAnalyzer</a> analyzer = new <a class="methodRef" href=LLkAnalyzer_java.html#LLkAnalyzer(Tool)>LLkAnalyzer</a>(this);
<a name=186 class="linenum">186	</SPAN>		<a class="classRef" href=MakeGrammar_java.html#MakeGrammar>MakeGrammar</a> behavior = new <a class="methodRef" href=MakeGrammar_java.html#MakeGrammar(Tool,String,LLkAnalyzer)>MakeGrammar</a>(this, args, analyzer);
<a name=187 class="linenum">187	</SPAN>
<a name=188 class="linenum">188	</SPAN>		try {
<a name=189 class="linenum">189	</SPAN>			<a class="classRef" href=ANTLRParser_java.html#ANTLRParser>ANTLRParser</a> p = new <a class="methodRef" href=ANTLRParser_java.html#ANTLRParser(TokenBuffer,ANTLRGrammarParseBehavior,Tool)>ANTLRParser</a>(tokenBuf, behavior, this);
<a name=190 class="linenum">190	</SPAN>			p.<a class="methodRef" href=ANTLRParser_java.html#grammar()>grammar</a>();
<a name=191 class="linenum">191	</SPAN>			if (<a class="varRef" href=Tool_java.html#hasError>hasError</a>) {
<a name=192 class="linenum">192	</SPAN>				System.out.println("Exiting due to errors.");
<a name=193 class="linenum">193	</SPAN>				System.exit(1);
<a name=194 class="linenum">194	</SPAN>			}
<a name=195 class="linenum">195	</SPAN>			<a class="methodRef" href=Tool_java.html#checkForInvalidArguments(String,BitSet)>checkForInvalidArguments</a>(modifiedArgs, <a class="varRef" href=Tool_java.html#cmdLineArgValid>cmdLineArgValid</a>);
<a name=196 class="linenum">196	</SPAN>
<a name=197 class="linenum">197	</SPAN>			<span class="comment">// Create the right code generator according to the "language" option
<a name=198 class="linenum">198	</SPAN></span>			<a class="classRef" href=CodeGenerator_java.html#CodeGenerator>CodeGenerator</a> codeGen;
<a name=199 class="linenum">199	</SPAN>
<a name=200 class="linenum">200	</SPAN>			<span class="comment">// SAS: created getLanguage() method so subclass can override
<a name=201 class="linenum">201	</SPAN></span>			<span class="comment">//      (necessary for VAJ interface)
<a name=202 class="linenum">202	</SPAN></span>			String codeGenClassName = "antlr." + <a class="methodRef" href=Tool_java.html#getLanguage(MakeGrammar)>getLanguage</a>(behavior) + "CodeGenerator";
<a name=203 class="linenum">203	</SPAN>			try {
<a name=204 class="linenum">204	</SPAN>				Class codeGenClass = Class.forName(codeGenClassName);
<a name=205 class="linenum">205	</SPAN>				codeGen = (<a class="classRef" href=CodeGenerator_java.html#CodeGenerator>CodeGenerator</a>)codeGenClass.newInstance();
<a name=206 class="linenum">206	</SPAN>				codeGen.<a class="methodRef" href=CodeGenerator_java.html#setBehavior(DefineGrammarSymbols)>setBehavior</a>(behavior);
<a name=207 class="linenum">207	</SPAN>				codeGen.<a class="methodRef" href=CodeGenerator_java.html#setAnalyzer(LLkGrammarAnalyzer)>setAnalyzer</a>(analyzer);
<a name=208 class="linenum">208	</SPAN>				codeGen.<a class="methodRef" href=CodeGenerator_java.html#setTool(Tool)>setTool</a>(this);
<a name=209 class="linenum">209	</SPAN>				codeGen.<a class="methodRef" href=CodeGenerator_java.html#gen()>gen</a>();
<a name=210 class="linenum">210	</SPAN>			}
<a name=211 class="linenum">211	</SPAN>			catch (ClassNotFoundException cnfe) {
<a name=212 class="linenum">212	</SPAN>				<a class="methodRef" href=Tool_java.html#panic(String)>panic</a>("Cannot instantiate code-generator: " + codeGenClassName);
<a name=213 class="linenum">213	</SPAN>			}
<a name=214 class="linenum">214	</SPAN>			catch (InstantiationException ie) {
<a name=215 class="linenum">215	</SPAN>				<a class="methodRef" href=Tool_java.html#panic(String)>panic</a>("Cannot instantiate code-generator: " + codeGenClassName);
<a name=216 class="linenum">216	</SPAN>			}
<a name=217 class="linenum">217	</SPAN>			catch (IllegalArgumentException ie) {
<a name=218 class="linenum">218	</SPAN>				<a class="methodRef" href=Tool_java.html#panic(String)>panic</a>("Cannot instantiate code-generator: " + codeGenClassName);
<a name=219 class="linenum">219	</SPAN>			}
<a name=220 class="linenum">220	</SPAN>			catch (IllegalAccessException iae) {
<a name=221 class="linenum">221	</SPAN>				<a class="methodRef" href=Tool_java.html#panic(String)>panic</a>("code-generator class '" + codeGenClassName + "' is not accessible");
<a name=222 class="linenum">222	</SPAN>			}
<a name=223 class="linenum">223	</SPAN>		}
<a name=224 class="linenum">224	</SPAN>		catch (<a class="classRef" href=MismatchedTokenException_java.html#MismatchedTokenException>MismatchedTokenException</a> mt) {
<a name=225 class="linenum">225	</SPAN>			System.err.println("Unhandled parser error: " + mt.getMessage());
<a name=226 class="linenum">226	</SPAN>		}
<a name=227 class="linenum">227	</SPAN>		catch (<a class="classRef" href=NoViableAltException_java.html#NoViableAltException>NoViableAltException</a> nva) {
<a name=228 class="linenum">228	</SPAN>			System.err.println("Unhandled parser error: " + nva.getMessage());
<a name=229 class="linenum">229	</SPAN>		}
<a name=230 class="linenum">230	</SPAN>		catch (<a class="classRef" href=ParserException_java.html#ParserException>ParserException</a> pe) {
<a name=231 class="linenum">231	</SPAN>			System.err.println("Unhandled parser error: " + pe.getMessage());
<a name=232 class="linenum">232	</SPAN>		}
<a name=233 class="linenum">233	</SPAN>		catch (IOException io) {
<a name=234 class="linenum">234	</SPAN>			System.err.println("IOException: " + io.getMessage());
<a name=235 class="linenum">235	</SPAN>		}
<a name=236 class="linenum">236	</SPAN>	}
<a name=237 class="linenum">237	</SPAN>	<span class="comment">/** Issue an error 
<a name=238 class="linenum">238	</SPAN>	 * @param s The message
<a name=239 class="linenum">239	</SPAN>	 */</span>
<a name=240 class="linenum">240	</SPAN>	public void <a class="methodDef" name=error(String) href=Tool_java_ref.html#error(String)>error</a>(String s) {
<a name=241 class="linenum">241	</SPAN>		<a class="varRef" href=Tool_java.html#hasError>hasError</a> = true;
<a name=242 class="linenum">242	</SPAN>		System.out.println("error: "+s);
<a name=243 class="linenum">243	</SPAN>	}
<a name=244 class="linenum">244	</SPAN>	<span class="comment">/** Issue an error with line number information 
<a name=245 class="linenum">245	</SPAN>	 * @param s The message
<a name=246 class="linenum">246	</SPAN>	 * @param line The grammar file line number on which the error occured
<a name=247 class="linenum">247	</SPAN>	 */</span>
<a name=248 class="linenum">248	</SPAN>	public void <a class="methodDef" name=error(String,int) href=Tool_java_ref.html#error(String,int)>error</a>(String s, int line) {
<a name=249 class="linenum">249	</SPAN>		<a class="varRef" href=Tool_java.html#hasError>hasError</a> = true;
<a name=250 class="linenum">250	</SPAN>		System.out.println("error: line "+line+": "+s);
<a name=251 class="linenum">251	</SPAN>	}
<a name=252 class="linenum">252	</SPAN><span class="comment">/** When we are 1.1 compatible...
<a name=253 class="linenum">253	</SPAN>public static Object factory2 (String p, Object[] initargs) {
<a name=254 class="linenum">254	</SPAN>  Class c;
<a name=255 class="linenum">255	</SPAN>  Object o = null;
<a name=256 class="linenum">256	</SPAN>  try {
<a name=257 class="linenum">257	</SPAN>	int argslen = initargs.length;
<a name=258 class="linenum">258	</SPAN>	Class cl[] = new Class[argslen];
<a name=259 class="linenum">259	</SPAN>	for (int i=0;i&lt;argslen;i++) {
<a name=260 class="linenum">260	</SPAN>	  cl[i] = Class.forName(initargs[i].getClass().getName());
<a name=261 class="linenum">261	</SPAN>	}
<a name=262 class="linenum">262	</SPAN>	c = Class.forName (p);
<a name=263 class="linenum">263	</SPAN>	Constructor con = c.getConstructor (cl);
<a name=264 class="linenum">264	</SPAN>	o = con.newInstance (initargs);
<a name=265 class="linenum">265	</SPAN>  } catch (Exception e) {
<a name=266 class="linenum">266	</SPAN>	System.err.println ("Can't make a " + p);
<a name=267 class="linenum">267	</SPAN>  }
<a name=268 class="linenum">268	</SPAN>  return o;
<a name=269 class="linenum">269	</SPAN>}
<a name=270 class="linenum">270	</SPAN>*/</span>
<a name=271 class="linenum">271	</SPAN>public static Object <a class="methodDef" name=factory(String) href=Tool_java_ref.html#factory(String)>factory</a>(String p) {
<a name=272 class="linenum">272	</SPAN>  Class c;
<a name=273 class="linenum">273	</SPAN>  Object o=null;
<a name=274 class="linenum">274	</SPAN>  try {
<a name=275 class="linenum">275	</SPAN>		c = Class.forName(p);<span class="comment">// get class def
<a name=276 class="linenum">276	</SPAN></span>		o = c.newInstance(); <span class="comment">// make a new one
<a name=277 class="linenum">277	</SPAN></span>  }
<a name=278 class="linenum">278	</SPAN>  catch (Exception e) {
<a name=279 class="linenum">279	</SPAN>		<span class="comment">// either class not found,
<a name=280 class="linenum">280	</SPAN></span>		<span class="comment">// class is interface/abstract, or
<a name=281 class="linenum">281	</SPAN></span>		<span class="comment">// class or initializer is not accessible.
<a name=282 class="linenum">282	</SPAN></span>		<a class="methodRef" href=Tool_java.html#warning(String)>warning</a>("Can't create an object of type " + p);
<a name=283 class="linenum">283	</SPAN>		return null;
<a name=284 class="linenum">284	</SPAN>  }
<a name=285 class="linenum">285	</SPAN>  return o;
<a name=286 class="linenum">286	</SPAN>}
<a name=287 class="linenum">287	</SPAN>	public static String <a class="methodDef" name=fileMinusPath(String) href=Tool_java_ref.html#fileMinusPath(String)>fileMinusPath</a>(String f) {
<a name=288 class="linenum">288	</SPAN>		String separator = System.getProperty("file.separator");
<a name=289 class="linenum">289	</SPAN>		int endOfPath = f.lastIndexOf(separator);
<a name=290 class="linenum">290	</SPAN>		if ( endOfPath == -1 ) {
<a name=291 class="linenum">291	</SPAN>			return f;	<span class="comment">// no path found
<a name=292 class="linenum">292	</SPAN></span>		}	
<a name=293 class="linenum">293	</SPAN>		return f.substring(endOfPath+1);
<a name=294 class="linenum">294	</SPAN>	}
<a name=295 class="linenum">295	</SPAN>	<span class="comment">/** Determine the language used for this run of ANTLR
<a name=296 class="linenum">296	</SPAN>	 *  This was made a method so the subclass can override it
<a name=297 class="linenum">297	</SPAN>	 */</span>
<a name=298 class="linenum">298	</SPAN>	public String <a class="methodDef" name=getLanguage(MakeGrammar) href=Tool_java_ref.html#getLanguage(MakeGrammar)>getLanguage</a>(<a class="classRef" href=MakeGrammar_java.html#MakeGrammar>MakeGrammar</a> behavior) {
<a name=299 class="linenum">299	</SPAN>		if (<a class="varRef" href=Tool_java.html#genDiagnostics>genDiagnostics</a>) {
<a name=300 class="linenum">300	</SPAN>			return "Diagnostic";
<a name=301 class="linenum">301	</SPAN>		}
<a name=302 class="linenum">302	</SPAN>		if (<a class="varRef" href=Tool_java.html#genHTML>genHTML</a>) {
<a name=303 class="linenum">303	</SPAN>			return "HTML";
<a name=304 class="linenum">304	</SPAN>		}
<a name=305 class="linenum">305	</SPAN>		return behavior.<a class="varRef" href=DefineGrammarSymbols_java.html#language>language</a>;
<a name=306 class="linenum">306	</SPAN>	}
<a name=307 class="linenum">307	</SPAN>	public static String <a class="methodDef" name=getOutputDirectory() href=Tool_java_ref.html#getOutputDirectory()>getOutputDirectory</a>() { return <a class="varRef" href=Tool_java.html#outputDir>outputDir</a>; }
<a name=308 class="linenum">308	</SPAN>private static void <a class="methodDef" name=help() href=Tool_java_ref.html#help()>help</a>() {
<a name=309 class="linenum">309	</SPAN>	System.err.println("usage: java antlr.Tool [args] file.g");
<a name=310 class="linenum">310	</SPAN>	System.err.println("  -o outputDir      specify output directory where all output generated.");
<a name=311 class="linenum">311	</SPAN>	System.err.println("  -debug            launch the ParseView debugger upon parser invocation.");
<a name=312 class="linenum">312	</SPAN>	System.err.println("  -html             generate an html file from your grammar (minus actions).");
<a name=313 class="linenum">313	</SPAN>	System.err.println("  -trace            have all rules call traceIn/traceOut.");
<a name=314 class="linenum">314	</SPAN>	System.err.println("  -traceParser      have parser rules call traceIn/traceOut.");
<a name=315 class="linenum">315	</SPAN>	System.err.println("  -traceLexer       have lexer rules call traceIn/traceOut.");
<a name=316 class="linenum">316	</SPAN>	System.err.println("  -traceTreeWalker  have tree walker rules call traceIn/traceOut.");
<a name=317 class="linenum">317	</SPAN>}
<a name=318 class="linenum">318	</SPAN>	public static void <a class="methodDef" name=main(String) href=Tool_java_ref.html#main(String)>main</a>(String[] args) {
<a name=319 class="linenum">319	</SPAN>		System.err.println("ANTLR Parser Generator   Version "+
<a name=320 class="linenum">320	</SPAN>							<a class="classRef" href=ANTLRParser_java.html#ANTLRParser>ANTLRParser</a>.<a class="varRef" href=ANTLRParser_java.html#version>version</a>+"   1989-1998 MageLang Institute");
<a name=321 class="linenum">321	</SPAN>		try {
<a name=322 class="linenum">322	</SPAN>			if ( args.length==0 ) {
<a name=323 class="linenum">323	</SPAN>				<a class="methodRef" href=Tool_java.html#help()>help</a>();
<a name=324 class="linenum">324	</SPAN>			}
<a name=325 class="linenum">325	</SPAN>			<a class="classRef" href=Tool_java.html#Tool>Tool</a> theTool = new <a class="methodRef" href=Tool_java.html#Tool()>Tool</a>();
<a name=326 class="linenum">326	</SPAN>			theTool.<a class="methodRef" href=Tool_java.html#doEverything(String)>doEverything</a>(args);
<a name=327 class="linenum">327	</SPAN>			theTool = null;
<a name=328 class="linenum">328	</SPAN>		}
<a name=329 class="linenum">329	</SPAN>		catch (Exception e) {
<a name=330 class="linenum">330	</SPAN>			System.err.println(System.getProperty("line.separator")+
<a name=331 class="linenum">331	</SPAN>				System.getProperty("line.separator"));
<a name=332 class="linenum">332	</SPAN>			System.err.println("#$%%*&@# internal error: "+e.toString());
<a name=333 class="linenum">333	</SPAN>			System.err.println("[complain to nearest government official");
<a name=334 class="linenum">334	</SPAN>			System.err.println(" or send hate-mail to parrt@parr-research.com;");
<a name=335 class="linenum">335	</SPAN>			System.err.println(" please send stack trace with report.]"+
<a name=336 class="linenum">336	</SPAN>				System.getProperty("line.separator"));
<a name=337 class="linenum">337	</SPAN>			e.printStackTrace();
<a name=338 class="linenum">338	</SPAN>		}
<a name=339 class="linenum">339	</SPAN>		System.exit(0);	
<a name=340 class="linenum">340	</SPAN>	}
<a name=341 class="linenum">341	</SPAN>	public static PrintWriter <a class="methodDef" name=openOutputFile(String) href=Tool_java_ref.html#openOutputFile(String)>openOutputFile</a>(String f) throws IOException {
<a name=342 class="linenum">342	</SPAN>		return new PrintWriter(new FileWriter(<a class="varRef" href=Tool_java.html#outputDir>outputDir</a>+System.getProperty("file.separator")+f));
<a name=343 class="linenum">343	</SPAN>	}
<a name=344 class="linenum">344	</SPAN>	<span class="comment">/** Issue an unknown fatal error */</span>
<a name=345 class="linenum">345	</SPAN>	public static void <a class="methodDef" name=panic() href=Tool_java_ref.html#panic()>panic</a>() {
<a name=346 class="linenum">346	</SPAN>		System.err.println("panic");
<a name=347 class="linenum">347	</SPAN>		System.exit(1);
<a name=348 class="linenum">348	</SPAN>	}
<a name=349 class="linenum">349	</SPAN>	<span class="comment">/** Issue a fatal error message 
<a name=350 class="linenum">350	</SPAN>	 * @param s The message
<a name=351 class="linenum">351	</SPAN>	 */</span>
<a name=352 class="linenum">352	</SPAN>	public static void <a class="methodDef" name=panic(String) href=Tool_java_ref.html#panic(String)>panic</a>(String s) {
<a name=353 class="linenum">353	</SPAN>		System.err.println("panic: "+s);
<a name=354 class="linenum">354	</SPAN>		System.exit(1);
<a name=355 class="linenum">355	</SPAN>	}
<a name=356 class="linenum">356	</SPAN>  <span class="comment">// File.getParent() can return null when the file is specified without
<a name=357 class="linenum">357	</SPAN></span>  <span class="comment">// a directory or is in the root directory.  
<a name=358 class="linenum">358	</SPAN></span>  <span class="comment">// This method handles those cases.
<a name=359 class="linenum">359	</SPAN></span>  public static File <a class="methodDef" name=parent(File) href=Tool_java_ref.html#parent(File)>parent</a>(File f) {
<a name=360 class="linenum">360	</SPAN>	String dirname = f.getParent();
<a name=361 class="linenum">361	</SPAN>	if (dirname == null) {
<a name=362 class="linenum">362	</SPAN>	  if (f.isAbsolute()) return new File(File.separator);
<a name=363 class="linenum">363	</SPAN>	  else return new File(System.getProperty("user.dir"));
<a name=364 class="linenum">364	</SPAN>	}
<a name=365 class="linenum">365	</SPAN>	return new File(dirname);
<a name=366 class="linenum">366	</SPAN>  }  
<a name=367 class="linenum">367	</SPAN>	<span class="comment">/** Parse a list such as "f1.g;f2.g;..." and return a Vector
<a name=368 class="linenum">368	</SPAN>	 *  of the elements.
<a name=369 class="linenum">369	</SPAN>	 */</span>
<a name=370 class="linenum">370	</SPAN>	public static <a class="classRef" href=../antlr/collections/impl/Vector_java.html#Vector>Vector</a> <a class="methodDef" name=parseSeparatedList(String,char) href=Tool_java_ref.html#parseSeparatedList(String,char)>parseSeparatedList</a>(String list, char separator) {
<a name=371 class="linenum">371	</SPAN>		<a class="classRef" href=../antlr/collections/impl/Vector_java.html#Vector>Vector</a> v = new <a class="methodRef" href=../antlr/collections/impl/Vector_java.html#Vector(int)>Vector</a>(10);		
<a name=372 class="linenum">372	</SPAN>		StringBuffer buf = new StringBuffer(100);
<a name=373 class="linenum">373	</SPAN>		int i=0;
<a name=374 class="linenum">374	</SPAN>		while ( i&lt;list.length() ) {
<a name=375 class="linenum">375	</SPAN>			while ( i&lt;list.length() && list.charAt(i)!=separator ) {
<a name=376 class="linenum">376	</SPAN>				buf.append(list.charAt(i));
<a name=377 class="linenum">377	</SPAN>				i++;
<a name=378 class="linenum">378	</SPAN>			}
<a name=379 class="linenum">379	</SPAN>			<span class="comment">// add element to vector
<a name=380 class="linenum">380	</SPAN></span>			v.<a class="methodRef" href=../antlr/collections/impl/Vector_java.html#appendElement(Object)>appendElement</a>(buf.toString());
<a name=381 class="linenum">381	</SPAN>			buf.setLength(0);
<a name=382 class="linenum">382	</SPAN>			<span class="comment">// must be a separator or finished.
<a name=383 class="linenum">383	</SPAN></span>			if ( i&lt;list.length() ) {	<span class="comment">// not done?
<a name=384 class="linenum">384	</SPAN></span>				i++;	<span class="comment">// skip separator
<a name=385 class="linenum">385	</SPAN></span>			}	
<a name=386 class="linenum">386	</SPAN>		}
<a name=387 class="linenum">387	</SPAN>		if ( v.<a class="methodRef" href=../antlr/collections/impl/Vector_java.html#size()>size</a>()==0 ) return null;	
<a name=388 class="linenum">388	</SPAN>		return v;
<a name=389 class="linenum">389	</SPAN>	}
<a name=390 class="linenum">390	</SPAN>	<span class="comment">/** given a filename, strip off the directory prefix (if any)
<a name=391 class="linenum">391	</SPAN>	 *  and return it.  Return "./" if f has no dir prefix.
<a name=392 class="linenum">392	</SPAN>	 */</span>
<a name=393 class="linenum">393	</SPAN>	public static String <a class="methodDef" name=pathToFile(String) href=Tool_java_ref.html#pathToFile(String)>pathToFile</a>(String f) {
<a name=394 class="linenum">394	</SPAN>		String separator = System.getProperty("file.separator");
<a name=395 class="linenum">395	</SPAN>		int endOfPath = f.lastIndexOf(separator);
<a name=396 class="linenum">396	</SPAN>		if ( endOfPath == -1 ) {
<a name=397 class="linenum">397	</SPAN>			<span class="comment">// no path, use current directory
<a name=398 class="linenum">398	</SPAN></span>			return "."+System.getProperty("file.separator");
<a name=399 class="linenum">399	</SPAN>		}	
<a name=400 class="linenum">400	</SPAN>		return f.substring(0, endOfPath+1);
<a name=401 class="linenum">401	</SPAN>	}
<a name=402 class="linenum">402	</SPAN><span class="comment">/** Process the command-line arguments.  Can only be called by Tool.
<a name=403 class="linenum">403	</SPAN> * @param args The command-line arguments passed to main()
<a name=404 class="linenum">404	</SPAN> */</span>
<a name=405 class="linenum">405	</SPAN>private void <a class="methodDef" name=processArguments(String) href=Tool_java_ref.html#processArguments(String)>processArguments</a>(String[] args) {
<a name=406 class="linenum">406	</SPAN>	for (int i = 0; i &lt; args.length; i++) {
<a name=407 class="linenum">407	</SPAN>		if (args[i].equals("-diagnostic")) {
<a name=408 class="linenum">408	</SPAN>			<a class="varRef" href=Tool_java.html#genDiagnostics>genDiagnostics</a> = true;
<a name=409 class="linenum">409	</SPAN>			<a class="varRef" href=Tool_java.html#genHTML>genHTML</a> = false;
<a name=410 class="linenum">410	</SPAN>			<a class="classRef" href=Tool_java.html#Tool>Tool</a>.<a class="methodRef" href=Tool_java.html#setArgOK(int)>setArgOK</a>(i);
<a name=411 class="linenum">411	</SPAN>		} else {
<a name=412 class="linenum">412	</SPAN>			if (args[i].equals("-o")) {
<a name=413 class="linenum">413	</SPAN>				<a class="classRef" href=Tool_java.html#Tool>Tool</a>.<a class="methodRef" href=Tool_java.html#setArgOK(int)>setArgOK</a>(i);
<a name=414 class="linenum">414	</SPAN>				if (i + 1 >= args.length) {
<a name=415 class="linenum">415	</SPAN>					<a class="methodRef" href=Tool_java.html#error(String)>error</a>("missing output directory with -o option; ignoring");
<a name=416 class="linenum">416	</SPAN>				} else {
<a name=417 class="linenum">417	</SPAN>					i++;
<a name=418 class="linenum">418	</SPAN>					<a class="methodRef" href=Tool_java.html#setOutputDirectory(String)>setOutputDirectory</a>(args[i]);
<a name=419 class="linenum">419	</SPAN>					<a class="classRef" href=Tool_java.html#Tool>Tool</a>.<a class="methodRef" href=Tool_java.html#setArgOK(int)>setArgOK</a>(i);
<a name=420 class="linenum">420	</SPAN>				}
<a name=421 class="linenum">421	</SPAN>			} else
<a name=422 class="linenum">422	</SPAN>				if (args[i].equals("-html")) {
<a name=423 class="linenum">423	</SPAN>					<a class="varRef" href=Tool_java.html#genHTML>genHTML</a> = true;
<a name=424 class="linenum">424	</SPAN>					<a class="varRef" href=Tool_java.html#genDiagnostics>genDiagnostics</a> = false;
<a name=425 class="linenum">425	</SPAN>					<a class="classRef" href=Tool_java.html#Tool>Tool</a>.<a class="methodRef" href=Tool_java.html#setArgOK(int)>setArgOK</a>(i);
<a name=426 class="linenum">426	</SPAN>				} else {
<a name=427 class="linenum">427	</SPAN>					if (args[i].charAt(0) != '-') {
<a name=428 class="linenum">428	</SPAN>						<span class="comment">// Must be the grammar file
<a name=429 class="linenum">429	</SPAN></span>						<a class="varRef" href=Tool_java.html#grammarFile>grammarFile</a> = args[i];
<a name=430 class="linenum">430	</SPAN>						<a class="classRef" href=Tool_java.html#Tool>Tool</a>.<a class="methodRef" href=Tool_java.html#setArgOK(int)>setArgOK</a>(i);
<a name=431 class="linenum">431	</SPAN>					}
<a name=432 class="linenum">432	</SPAN>				}
<a name=433 class="linenum">433	</SPAN>		}
<a name=434 class="linenum">434	</SPAN>	}
<a name=435 class="linenum">435	</SPAN>}
<a name=436 class="linenum">436	</SPAN>	public static void <a class="methodDef" name=setArgOK(int) href=Tool_java_ref.html#setArgOK(int)>setArgOK</a>(int i) {
<a name=437 class="linenum">437	</SPAN>		<a class="varRef" href=Tool_java.html#cmdLineArgValid>cmdLineArgValid</a>.<a class="methodRef" href=../antlr/collections/impl/BitSet_java.html#add(int)>add</a>(i);
<a name=438 class="linenum">438	</SPAN>	}
<a name=439 class="linenum">439	</SPAN>	public static void <a class="methodDef" name=setOutputDirectory(String) href=Tool_java_ref.html#setOutputDirectory(String)>setOutputDirectory</a>(String o) { <a class="varRef" href=Tool_java.html#outputDir>outputDir</a> = o; }
<a name=440 class="linenum">440	</SPAN>	<span class="comment">/** General-purpose utility function for removing 
<a name=441 class="linenum">441	</SPAN>	 * characters from back of string 
<a name=442 class="linenum">442	</SPAN>	 * @param s The string to process
<a name=443 class="linenum">443	</SPAN>	 * @param c The character to remove
<a name=444 class="linenum">444	</SPAN>	 * @return The resulting string
<a name=445 class="linenum">445	</SPAN>	 */</span>
<a name=446 class="linenum">446	</SPAN>	static public String <a class="methodDef" name=stripBack(String,char) href=Tool_java_ref.html#stripBack(String,char)>stripBack</a>(String s, char c) {
<a name=447 class="linenum">447	</SPAN>		while (s.length() > 0 && s.charAt(s.length()-1) == c)
<a name=448 class="linenum">448	</SPAN>		{
<a name=449 class="linenum">449	</SPAN>			s = s.substring(0, s.length()-1);
<a name=450 class="linenum">450	</SPAN>		}
<a name=451 class="linenum">451	</SPAN>		return s;
<a name=452 class="linenum">452	</SPAN>	}
<a name=453 class="linenum">453	</SPAN>	<span class="comment">/** General-purpose utility function for removing 
<a name=454 class="linenum">454	</SPAN>	 * characters from back of string 
<a name=455 class="linenum">455	</SPAN>	 * @param s The string to process
<a name=456 class="linenum">456	</SPAN>	 * @param remove A string containing the set of characters to remove
<a name=457 class="linenum">457	</SPAN>	 * @return The resulting string
<a name=458 class="linenum">458	</SPAN>	 */</span>
<a name=459 class="linenum">459	</SPAN>	static public String <a class="methodDef" name=stripBack(String,String) href=Tool_java_ref.html#stripBack(String,String)>stripBack</a>(String s, String remove) {
<a name=460 class="linenum">460	</SPAN>		boolean changed;
<a name=461 class="linenum">461	</SPAN>		do {
<a name=462 class="linenum">462	</SPAN>			changed = false;
<a name=463 class="linenum">463	</SPAN>			for (int i = 0; i &lt; remove.length(); i++) {
<a name=464 class="linenum">464	</SPAN>				char c = remove.charAt(i);
<a name=465 class="linenum">465	</SPAN>				while (s.length() > 0 && s.charAt(s.length()-1) == c)
<a name=466 class="linenum">466	</SPAN>				{
<a name=467 class="linenum">467	</SPAN>					changed = true;
<a name=468 class="linenum">468	</SPAN>					s = s.substring(0, s.length()-1);
<a name=469 class="linenum">469	</SPAN>				}
<a name=470 class="linenum">470	</SPAN>			}
<a name=471 class="linenum">471	</SPAN>		} while (changed);
<a name=472 class="linenum">472	</SPAN>		return s;
<a name=473 class="linenum">473	</SPAN>	}
<a name=474 class="linenum">474	</SPAN>	<span class="comment">/** General-purpose utility function for removing 
<a name=475 class="linenum">475	</SPAN>	 * characters from front of string 
<a name=476 class="linenum">476	</SPAN>	 * @param s The string to process
<a name=477 class="linenum">477	</SPAN>	 * @param c The character to remove
<a name=478 class="linenum">478	</SPAN>	 * @return The resulting string
<a name=479 class="linenum">479	</SPAN>	 */</span>
<a name=480 class="linenum">480	</SPAN>	static public String <a class="methodDef" name=stripFront(String,char) href=Tool_java_ref.html#stripFront(String,char)>stripFront</a>(String s, char c) {
<a name=481 class="linenum">481	</SPAN>		while (s.length() > 0 && s.charAt(0) == c) {
<a name=482 class="linenum">482	</SPAN>			s = s.substring(1);
<a name=483 class="linenum">483	</SPAN>		}
<a name=484 class="linenum">484	</SPAN>		return s;
<a name=485 class="linenum">485	</SPAN>	}
<a name=486 class="linenum">486	</SPAN>	<span class="comment">/** General-purpose utility function for removing 
<a name=487 class="linenum">487	</SPAN>	 * characters from front of string 
<a name=488 class="linenum">488	</SPAN>	 * @param s The string to process
<a name=489 class="linenum">489	</SPAN>	 * @param remove A string containing the set of characters to remove
<a name=490 class="linenum">490	</SPAN>	 * @return The resulting string
<a name=491 class="linenum">491	</SPAN>	 */</span>
<a name=492 class="linenum">492	</SPAN>	static public String <a class="methodDef" name=stripFront(String,String) href=Tool_java_ref.html#stripFront(String,String)>stripFront</a>(String s, String remove) {
<a name=493 class="linenum">493	</SPAN>		boolean changed;
<a name=494 class="linenum">494	</SPAN>		do {
<a name=495 class="linenum">495	</SPAN>			changed = false;
<a name=496 class="linenum">496	</SPAN>			for (int i = 0; i &lt; remove.length(); i++) {
<a name=497 class="linenum">497	</SPAN>				char c = remove.charAt(i);
<a name=498 class="linenum">498	</SPAN>				while (s.length() > 0 && s.charAt(0) == c) {
<a name=499 class="linenum">499	</SPAN>					changed = true;
<a name=500 class="linenum">500	</SPAN>					s = s.substring(1);
<a name=501 class="linenum">501	</SPAN>				}
<a name=502 class="linenum">502	</SPAN>			}
<a name=503 class="linenum">503	</SPAN>		} while (changed);
<a name=504 class="linenum">504	</SPAN>		return s;
<a name=505 class="linenum">505	</SPAN>	}
<a name=506 class="linenum">506	</SPAN>	<span class="comment">/** General-purpose utility function for removing 
<a name=507 class="linenum">507	</SPAN>	 * characters from the front and back of string 
<a name=508 class="linenum">508	</SPAN>	 * @param s The string to process
<a name=509 class="linenum">509	</SPAN>	 * @param head exact string to strip from head
<a name=510 class="linenum">510	</SPAN>	 * @param tail exact string to strip from tail
<a name=511 class="linenum">511	</SPAN>	 * @return The resulting string
<a name=512 class="linenum">512	</SPAN>	 */</span>
<a name=513 class="linenum">513	</SPAN>	public static String <a class="methodDef" name=stripFrontBack(String,String,String) href=Tool_java_ref.html#stripFrontBack(String,String,String)>stripFrontBack</a>(String src, String head, String tail) {
<a name=514 class="linenum">514	</SPAN>		int h = src.indexOf(head);
<a name=515 class="linenum">515	</SPAN>		int t = src.lastIndexOf(tail);
<a name=516 class="linenum">516	</SPAN>		if ( h==-1 || t==-1 ) return src;
<a name=517 class="linenum">517	</SPAN>		return src.substring(h+1,t);
<a name=518 class="linenum">518	</SPAN>	}
<a name=519 class="linenum">519	</SPAN>	<span class="comment">/** Issue an error; used for general tool errors not for grammar stuff
<a name=520 class="linenum">520	</SPAN>	 * @param s The message
<a name=521 class="linenum">521	</SPAN>	 */</span>
<a name=522 class="linenum">522	</SPAN>	public static void <a class="methodDef" name=toolError(String) href=Tool_java_ref.html#toolError(String)>toolError</a>(String s) {
<a name=523 class="linenum">523	</SPAN>		System.out.println("error: "+s);
<a name=524 class="linenum">524	</SPAN>	}
<a name=525 class="linenum">525	</SPAN>	<span class="comment">/** Issue a warning 
<a name=526 class="linenum">526	</SPAN>	 * @param s the message
<a name=527 class="linenum">527	</SPAN>	 */</span>
<a name=528 class="linenum">528	</SPAN>	public static void <a class="methodDef" name=warning(String) href=Tool_java_ref.html#warning(String)>warning</a>(String s) {
<a name=529 class="linenum">529	</SPAN>		System.out.println("warning: "+s);
<a name=530 class="linenum">530	</SPAN>	}
<a name=531 class="linenum">531	</SPAN>	<span class="comment">/** Issue a warning with line number information 
<a name=532 class="linenum">532	</SPAN>	 * @param s The message
<a name=533 class="linenum">533	</SPAN>	 * @param line The grammar file line number on which the error occured
<a name=534 class="linenum">534	</SPAN>	 */</span>
<a name=535 class="linenum">535	</SPAN>	public static void <a class="methodDef" name=warning(String,int) href=Tool_java_ref.html#warning(String,int)>warning</a>(String s, int line) {
<a name=536 class="linenum">536	</SPAN>		System.out.println("warning; line "+line+": "+s);
<a name=537 class="linenum">537	</SPAN>	}
<a name=538 class="linenum">538	</SPAN>}
<a name=539 class="linenum">539	</SPAN></pre>
